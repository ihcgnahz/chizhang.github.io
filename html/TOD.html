<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>
<title>assignment1_chizhang</title><link href='https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext' rel='stylesheet' type='text/css' /><style type='text/css'>html {overflow-x: initial !important;}:root { --bg-color:#ffffff; --text-color:#333333; --select-text-bg-color:#B5D6FC; --select-text-font-color:auto; --monospace:"Lucida Console",Consolas,"Courier",monospace; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
body { margin: 0px; padding: 0px; height: auto; bottom: 0px; top: 0px; left: 0px; right: 0px; font-size: 1rem; line-height: 1.42857; overflow-x: hidden; background: inherit; tab-size: 4; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; overflow-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 40px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
.typora-export .task-list-item input { pointer-events: none; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
  .CodeMirror-sizer { margin-left: 0px !important; }
  .CodeMirror-gutters { display: none !important; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; image-orientation: from-image; }
button, input, select, textarea { color: inherit; font: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
p { line-height: inherit; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 4; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px; }
tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right: 0px; background-color: inherit; }
.CodeMirror-linenumber { user-select: none; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-diagram-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; font-variant-ligatures: no-common-ligatures; }
  #write { margin-top: 0px; padding-top: 0px; border-color: transparent !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  html.blink-to-pdf { font-size: 13px; }
  .typora-export #write { break-after: avoid; }
  .typora-export #write::after { height: 0px; }
  .is-mac table { break-inside: avoid; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
#write.first-line-indent p > .md-image:only-child:not(.md-img-error) img { left: -2em; position: relative; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
[contenteditable="true"]:active, [contenteditable="true"]:focus, [contenteditable="false"]:active, [contenteditable="false"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: none; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.8; font-family: var(--monospace); }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: initial !important; border-style: none !important; border-color: initial !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.md-inline-math .MathJax_SVG .noError { display: none !important; }
.html-for-mac .inline-math-svg .MathJax_SVG { vertical-align: 0.2px; }
.md-math-block .MathJax_SVG_Display { text-align: center; margin: 0px; position: relative; text-indent: 0px; max-width: none; max-height: none; min-height: 0px; min-width: 100%; width: auto; overflow-y: hidden; display: block !important; }
.MathJax_SVG_Display, .md-inline-math .MathJax_SVG_Display { width: auto; margin: inherit; display: inline-block !important; }
.MathJax_SVG .MJX-monospace { font-family: var(--monospace); }
.MathJax_SVG .MJX-sans-serif { font-family: sans-serif; }
.MathJax_SVG { display: inline; font-style: normal; font-weight: 400; line-height: normal; zoom: 90%; text-indent: 0px; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; padding: 0px; margin: 0px; }
.MathJax_SVG * { transition: none 0s ease 0s; }
.MathJax_SVG_Display svg { vertical-align: middle !important; margin-bottom: 0px !important; margin-top: 0px !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="flow"] svg, [lang="mermaid"] svg { max-width: 100%; height: auto; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom: 0px; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: none; }
.highlight td, .highlight tr { border: 0px; }
svg[id^="mermaidChart"] { line-height: 1em; }
mark { background: rgb(255, 255, 0); color: rgb(0, 0, 0); }
.md-html-inline .md-plain, .md-html-inline strong, mark .md-inline-math, mark strong { color: inherit; }
mark .md-meta { color: rgb(0, 0, 0); opacity: 0.3 !important; }
@media print {
  .typora-export h1, .typora-export h2, .typora-export h3, .typora-export h4, .typora-export h5, .typora-export h6 { break-inside: avoid; }
}


.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background: inherit; }
.CodeMirror-scroll { overflow: auto hidden; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right: 1px solid rgb(221, 221, 221); background: inherit; white-space: nowrap; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background: inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 30px; z-index: 3; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background: 0px 0px !important; border: none !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: 0px 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; overflow-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { overflow-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right: 30px solid transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right: none; width: auto; }
.CodeMirror-linebackground { position: absolute; left: 0px; right: 0px; top: 0px; bottom: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}


:root {
    --side-bar-bg-color: #fafafa;
    --control-text-color: #777;
}

@include-when-export url(https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext);

/* open-sans-regular - latin-ext_latin */
  /* open-sans-italic - latin-ext_latin */
    /* open-sans-700 - latin-ext_latin */
    /* open-sans-700italic - latin-ext_latin */
  html {
    font-size: 16px;
}

body {
    font-family: "Open Sans","Clear Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
    color: rgb(51, 51, 51);
    line-height: 1.6;
}

#write {
    max-width: 860px;
  	margin: 0 auto;
  	padding: 30px;
    padding-bottom: 100px;
}

@media only screen and (min-width: 1400px) {
	#write {
		max-width: 1024px;
	}
}

@media only screen and (min-width: 1800px) {
	#write {
		max-width: 1200px;
	}
}

#write > ul:first-child,
#write > ol:first-child{
    margin-top: 30px;
}

a {
    color: #4183C4;
}
h1,
h2,
h3,
h4,
h5,
h6 {
    position: relative;
    margin-top: 1rem;
    margin-bottom: 1rem;
    font-weight: bold;
    line-height: 1.4;
    cursor: text;
}
h1:hover a.anchor,
h2:hover a.anchor,
h3:hover a.anchor,
h4:hover a.anchor,
h5:hover a.anchor,
h6:hover a.anchor {
    text-decoration: none;
}
h1 tt,
h1 code {
    font-size: inherit;
}
h2 tt,
h2 code {
    font-size: inherit;
}
h3 tt,
h3 code {
    font-size: inherit;
}
h4 tt,
h4 code {
    font-size: inherit;
}
h5 tt,
h5 code {
    font-size: inherit;
}
h6 tt,
h6 code {
    font-size: inherit;
}
h1 {
    font-size: 2.25em;
    line-height: 1.2;
    border-bottom: 1px solid #eee;
}
h2 {
    font-size: 1.75em;
    line-height: 1.225;
    border-bottom: 1px solid #eee;
}

/*@media print {
    .typora-export h1,
    .typora-export h2 {
        border-bottom: none;
        padding-bottom: initial;
    }

    .typora-export h1::after,
    .typora-export h2::after {
        content: "";
        display: block;
        height: 100px;
        margin-top: -96px;
        border-top: 1px solid #eee;
    }
}*/

h3 {
    font-size: 1.5em;
    line-height: 1.43;
}
h4 {
    font-size: 1.25em;
}
h5 {
    font-size: 1em;
}
h6 {
   font-size: 1em;
    color: #777;
}
p,
blockquote,
ul,
ol,
dl,
table{
    margin: 0.8em 0;
}
li>ol,
li>ul {
    margin: 0 0;
}
hr {
    height: 2px;
    padding: 0;
    margin: 16px 0;
    background-color: #e7e7e7;
    border: 0 none;
    overflow: hidden;
    box-sizing: content-box;
}

li p.first {
    display: inline-block;
}
ul,
ol {
    padding-left: 30px;
}
ul:first-child,
ol:first-child {
    margin-top: 0;
}
ul:last-child,
ol:last-child {
    margin-bottom: 0;
}
blockquote {
    border-left: 4px solid #dfe2e5;
    padding: 0 15px;
    color: #777777;
}
blockquote blockquote {
    padding-right: 0;
}
table {
    padding: 0;
    word-break: initial;
}
table tr {
    border-top: 1px solid #dfe2e5;
    margin: 0;
    padding: 0;
}
table tr:nth-child(2n),
thead {
    background-color: #f8f8f8;
}
table tr th {
    font-weight: bold;
    border: 1px solid #dfe2e5;
    border-bottom: 0;
    margin: 0;
    padding: 6px 13px;
}
table tr td {
    border: 1px solid #dfe2e5;
    margin: 0;
    padding: 6px 13px;
}
table tr th:first-child,
table tr td:first-child {
    margin-top: 0;
}
table tr th:last-child,
table tr td:last-child {
    margin-bottom: 0;
}

.CodeMirror-lines {
    padding-left: 4px;
}

.code-tooltip {
    box-shadow: 0 1px 1px 0 rgba(0,28,36,.3);
    border-top: 1px solid #eef2f2;
}

.md-fences,
code,
tt {
    border: 1px solid #e7eaed;
    background-color: #f8f8f8;
    border-radius: 3px;
    padding: 0;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
}

code {
    background-color: #f3f4f4;
    padding: 0 2px 0 2px;
}

.md-fences {
    margin-bottom: 15px;
    margin-top: 15px;
    padding-top: 8px;
    padding-bottom: 6px;
}


.md-task-list-item > input {
  margin-left: -1.3em;
}

@media print {
    html {
        font-size: 13px;
    }
    table,
    pre {
        page-break-inside: avoid;
    }
    pre {
        word-wrap: break-word;
    }
}

.md-fences {
	background-color: #f8f8f8;
}
#write pre.md-meta-block {
	padding: 1rem;
    font-size: 85%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border: 0;
    border-radius: 3px;
    color: #777777;
    margin-top: 0 !important;
}

.mathjax-block>.code-tooltip {
	bottom: .375rem;
}

.md-mathjax-midline {
    background: #fafafa;
}

#write>h3.md-focus:before{
	left: -1.5625rem;
	top: .375rem;
}
#write>h4.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h5.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h6.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
.md-image>.md-meta {
    /*border: 1px solid #ddd;*/
    border-radius: 3px;
    padding: 2px 0px 0px 4px;
    font-size: 0.9em;
    color: inherit;
}

.md-tag {
    color: #a7a7a7;
    opacity: 1;
}

.md-toc { 
    margin-top:20px;
    padding-bottom:20px;
}

.sidebar-tabs {
    border-bottom: none;
}

#typora-quick-open {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
}

#typora-quick-open-item {
    background-color: #FAFAFA;
    border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee;
    border-style: solid;
    border-width: 1px;
}

/** focus mode */
.on-focus-mode blockquote {
    border-left-color: rgba(85, 85, 85, 0.12);
}

header, .context-menu, .megamenu-content, footer{
    font-family: "Segoe UI", "Arial", sans-serif;
}

.file-node-content:hover .file-node-icon,
.file-node-content:hover .file-node-open-state{
    visibility: visible;
}

.mac-seamless-mode #typora-sidebar {
    background-color: #fafafa;
    background-color: var(--side-bar-bg-color);
}

.md-lang {
    color: #b4654d;
}

.html-for-mac .context-menu {
    --item-hover-bg-color: #E6F0FE;
}

#md-notification .btn {
    border: 0;
}

.dropdown-menu .divider {
    border-color: #e5e5e5;
}

.ty-preferences .window-content {
    background-color: #fafafa;
}

.ty-preferences .nav-group-item.active {
    color: white;
    background: #999;
}


</style>
</head>
<body class='typora-export os-windows'>
<div id='write'  class=''><h3><a name="tod-study-in-los-angeles" class="md-header-anchor"></a><span>TOD Study in Los Angeles</span></h3><p><span>MUSA 508: Public Policy Analytics</span>
<span>Author: Chi Zhang, Zhijie Zhou</span></p><p><span>This assignment investigated Transit Oriented Development (TOD) potential in Los Angeles City, CA, through the analysis of space/time indicators wrangled from Census data with respect to LA Metro stations. We selected Population, Median Rent, Percent of Bachelor, and Percent of Poverty of the census tracts within 0.5 mile of each Metro stations in 2009 and 2018 as TOD indicators for comparison purpose. Besides, we also visualized the spatial patterns of rape crime incidents with stations and median rent data respectively. Here is a table of contents.</span></p><div class='md-toc' mdtype='toc'><p class="md-toc-content" role="list"><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n0"><a class="md-toc-inner" href="#tod-study-in-los-angeles">TOD Study in Los Angeles</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n5"><a class="md-toc-inner" href="#1-introduction">1. Introduction</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n6"><a class="md-toc-inner" href="#background">Background</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n8"><a class="md-toc-inner" href="#data--resources">Data  Resources</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n16"><a class="md-toc-inner" href="#method">Method</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n19"><a class="md-toc-inner" href="#2-set-up">2. Set Up</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n20"><a class="md-toc-inner" href="#load-libraries">Load Libraries</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n22"><a class="md-toc-inner" href="#load-styling-options">Load Styling options </a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n24"><a class="md-toc-inner" href="#set-up-plot-theme-function">Set up plot theme function</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n26"><a class="md-toc-inner" href="#load-quantile-break-functions">Load Quantile break functions</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n28"><a class="md-toc-inner" href="#load-hexadecimal-color-palette">Load hexadecimal color palette</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n30"><a class="md-toc-inner" href="#load-census-api-key">Load census API key</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n32"><a class="md-toc-inner" href="#load-multiple-rings-buffer-function">Load multiple rings buffer function</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n35"><a class="md-toc-inner" href="#3-data-wrangling">3. Data Wrangling</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n36"><a class="md-toc-inner" href="#wrangling-census-tracts-data">Wrangling Census Tracts Data</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n41"><a class="md-toc-inner" href="#wrangling-transit-open-data">Wrangling Transit Open Data</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n43"><a class="md-toc-inner" href="#relating-metro-stations-and-tracts">Relating Metro Stations and Tracts</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n46"><a class="md-toc-inner" href="#4-tod-indicators-analytics">4. TOD Indicators Analytics</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n47"><a class="md-toc-inner" href="#tod---census-variables">TOD - Census Variables</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n65"><a class="md-toc-inner" href="#tod-indicators-summary-table">TOD Indicators Summary Table</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n69"><a class="md-toc-inner" href="#tod-indicator-differences-time--space">TOD Indicator Differences (Time &amp; Space)</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n81"><a class="md-toc-inner" href="#graduated-symbol-maps">Graduated Symbol Maps</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n90"><a class="md-toc-inner" href="#mean-rent-as-a-function-of-distance-to-subway-stations">Mean Rent as a function of Distance to Subway Stations</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n96"><a class="md-toc-inner" href="#5-crime-analytics-and-tod">5. Crime Analytics and TOD</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n106"><a class="md-toc-inner" href="#6-discussion">6. Discussion</a></span></p></div><h4><a name="1-introduction" class="md-header-anchor"></a><span>1. Introduction</span></h4><h5><a name="background" class="md-header-anchor"></a><span>Background</span></h5><p><span>Public transits play an important role for citizen living in Los Angeles. According to the report </span><em><span>Access Across America: Transit 2017</span></em><span> by the Minnesota Department of Transportation, Los Angeles ranks 6 in metropolitan areas with the greatest job accessibility by transit. In this assignment, we look into the TOD around metro station in Los Angeles. Are citizens in LA willing to pay more rent for the transit amenities? Are there some relevance between TOD and crime data? How does the Expo line built in 2012 influence the surrounding urban context? The following data analysis and visualization is going to around these questions.</span></p><h5><a name="data--resources" class="md-header-anchor"></a><span>Data  Resources</span></h5><ol start='' ><li><span>Los Angeles census data in 2009 and 2018, US Census Bureau</span></li><li><span>Shape file of Metro Rail Stations, City of Los Angeles Open Data</span></li><li><span>Crime data in 2009 and 2018, City of Los Angeles Open Data</span></li></ol><h5><a name="method" class="md-header-anchor"></a><span>Method</span></h5><p><span>Spatial data wrangling and visualization fundamentals are processed with the </span><code>tidyverse</code><span>, </span><code>sf</code><span> and </span><code>ggplot2</code><span> packages. </span></p><p>&nbsp;</p><h4><a name="2-set-up" class="md-header-anchor"></a><span>2. Set Up</span></h4><h5><a name="load-libraries" class="md-header-anchor"></a><span>Load Libraries</span></h5><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><span><span>​</span>x</span></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">tidyverse</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">tidycensus</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">sf</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">kableExtra</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">options</span>(<span class="cm-variable">scipen</span><span class="cm-operator">=</span><span class="cm-number">999</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">options</span>(<span class="cm-variable">tigris_class</span> <span class="cm-operator">=</span> <span class="cm-string">"sf"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 161px;"></div><div class="CodeMirror-gutters" style="display: none; height: 161px;"></div></div></div></pre><h5><a name="load-styling-options" class="md-header-anchor"></a><span>Load Styling options </span></h5><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Set up map theme function</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mapTheme</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-keyword">function</span>(<span class="cm-variable">base_size</span> <span class="cm-operator">=</span> <span class="cm-number">12</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">theme</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">text</span> <span class="cm-arg-is">=</span> <span class="cm-variable">element_text</span>( <span class="cm-variable">color</span> <span class="cm-operator">=</span> <span class="cm-string">"black"</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">plot.title</span> <span class="cm-arg-is">=</span> <span class="cm-variable">element_text</span>(<span class="cm-variable">size</span> <span class="cm-operator">=</span> <span class="cm-number">16</span>,<span class="cm-variable">colour</span> <span class="cm-operator">=</span> <span class="cm-string">"black"</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">plot.subtitle</span><span class="cm-arg-is">=</span><span class="cm-variable">element_text</span>(<span class="cm-variable">face</span><span class="cm-operator">=</span><span class="cm-string">"italic"</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">plot.caption</span><span class="cm-arg-is">=</span><span class="cm-variable">element_text</span>(<span class="cm-variable">hjust</span><span class="cm-operator">=</span><span class="cm-number">0</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">axis.ticks</span> <span class="cm-arg-is">=</span> <span class="cm-variable">element_blank</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">panel.background</span> <span class="cm-arg-is">=</span> <span class="cm-variable">element_blank</span>(),<span class="cm-variable">axis.title</span> <span class="cm-arg-is">=</span> <span class="cm-variable">element_blank</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">axis.text</span> <span class="cm-arg-is">=</span> <span class="cm-variable">element_blank</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">axis.title.x</span> <span class="cm-arg-is">=</span> <span class="cm-variable">element_blank</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">axis.title.y</span> <span class="cm-arg-is">=</span> <span class="cm-variable">element_blank</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">panel.grid.minor</span> <span class="cm-arg-is">=</span> <span class="cm-variable">element_blank</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">panel.border</span> <span class="cm-arg-is">=</span> <span class="cm-variable">element_rect</span>(<span class="cm-variable">colour</span> <span class="cm-operator">=</span> <span class="cm-string">"black"</span>, <span class="cm-variable">fill</span><span class="cm-operator">=</span><span class="cm-atom">NA</span>, <span class="cm-variable">size</span><span class="cm-operator">=</span><span class="cm-number">2</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">strip.text.x</span> <span class="cm-arg-is">=</span> <span class="cm-variable">element_text</span>(<span class="cm-variable">size</span> <span class="cm-operator">=</span> <span class="cm-number">14</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 391px;"></div><div class="CodeMirror-gutters" style="display: none; height: 391px;"></div></div></div></pre><h5><a name="set-up-plot-theme-function" class="md-header-anchor"></a><span>Set up plot theme function</span></h5><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plotTheme</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-keyword">function</span>(<span class="cm-variable">base_size</span> <span class="cm-operator">=</span> <span class="cm-number">12</span>) {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">theme</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">text</span> <span class="cm-arg-is">=</span> <span class="cm-variable">element_text</span>( <span class="cm-variable">color</span> <span class="cm-operator">=</span> <span class="cm-string">"black"</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">plot.title</span> <span class="cm-arg-is">=</span> <span class="cm-variable">element_text</span>(<span class="cm-variable">size</span> <span class="cm-operator">=</span> <span class="cm-number">16</span>,<span class="cm-variable">colour</span> <span class="cm-operator">=</span> <span class="cm-string">"black"</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">plot.subtitle</span> <span class="cm-arg-is">=</span> <span class="cm-variable">element_text</span>(<span class="cm-variable">face</span><span class="cm-operator">=</span><span class="cm-string">"italic"</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">plot.caption</span> <span class="cm-arg-is">=</span> <span class="cm-variable">element_text</span>(<span class="cm-variable">hjust</span><span class="cm-operator">=</span><span class="cm-number">0</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">axis.ticks</span> <span class="cm-arg-is">=</span> <span class="cm-variable">element_blank</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">panel.background</span> <span class="cm-arg-is">=</span> <span class="cm-variable">element_blank</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">panel.grid.major</span> <span class="cm-arg-is">=</span> <span class="cm-variable">element_line</span>(<span class="cm-string">"grey80"</span>, <span class="cm-variable">size</span> <span class="cm-operator">=</span> <span class="cm-number">0.1</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">panel.grid.minor</span> <span class="cm-arg-is">=</span> <span class="cm-variable">element_blank</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">panel.border</span> <span class="cm-arg-is">=</span> <span class="cm-variable">element_rect</span>(<span class="cm-variable">colour</span> <span class="cm-operator">=</span> <span class="cm-string">"black"</span>, <span class="cm-variable">fill</span><span class="cm-operator">=</span><span class="cm-atom">NA</span>, <span class="cm-variable">size</span><span class="cm-operator">=</span><span class="cm-number">2</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">strip.background</span> <span class="cm-arg-is">=</span> <span class="cm-variable">element_rect</span>(<span class="cm-variable">fill</span> <span class="cm-operator">=</span> <span class="cm-string">"grey80"</span>, <span class="cm-variable">color</span> <span class="cm-operator">=</span> <span class="cm-string">"white"</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">strip.text</span> <span class="cm-arg-is">=</span> <span class="cm-variable">element_text</span>(<span class="cm-variable">size</span><span class="cm-operator">=</span><span class="cm-number">12</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">axis.title</span> <span class="cm-arg-is">=</span> <span class="cm-variable">element_text</span>(<span class="cm-variable">size</span><span class="cm-operator">=</span><span class="cm-number">12</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">axis.text</span> <span class="cm-arg-is">=</span> <span class="cm-variable">element_text</span>(<span class="cm-variable">size</span><span class="cm-operator">=</span><span class="cm-number">10</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">plot.background</span> <span class="cm-arg-is">=</span> <span class="cm-variable">element_blank</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">legend.background</span> <span class="cm-arg-is">=</span> <span class="cm-variable">element_blank</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">legend.title</span> <span class="cm-arg-is">=</span> <span class="cm-variable">element_text</span>(<span class="cm-variable">colour</span> <span class="cm-operator">=</span> <span class="cm-string">"black"</span>, <span class="cm-variable">face</span> <span class="cm-operator">=</span> <span class="cm-string">"italic"</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">legend.text</span> <span class="cm-arg-is">=</span> <span class="cm-variable">element_text</span>(<span class="cm-variable">colour</span> <span class="cm-operator">=</span> <span class="cm-string">"black"</span>, <span class="cm-variable">face</span> <span class="cm-operator">=</span> <span class="cm-string">"italic"</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">strip.text.x</span> <span class="cm-arg-is">=</span> <span class="cm-variable">element_text</span>(<span class="cm-variable">size</span> <span class="cm-operator">=</span> <span class="cm-number">14</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  )</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 506px;"></div><div class="CodeMirror-gutters" style="display: none; height: 506px;"></div></div></div></pre><h5><a name="load-quantile-break-functions" class="md-header-anchor"></a><span>Load Quantile break functions</span></h5><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="r"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">qBr</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-keyword">function</span>(<span class="cm-variable">df</span>, <span class="cm-variable">variable</span>, <span class="cm-variable">rnd</span>) {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">missing</span>(<span class="cm-variable">rnd</span>)) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">as.character</span>(<span class="cm-variable">quantile</span>(<span class="cm-variable">round</span>(<span class="cm-variable">df</span>[[<span class="cm-variable">variable</span>]],<span class="cm-number">0</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">c</span>(<span class="cm-number">.01</span>,<span class="cm-number">.2</span>,<span class="cm-number">.4</span>,<span class="cm-number">.6</span>,<span class="cm-number">.8</span>), <span class="cm-variable">na.rm</span><span class="cm-operator">=</span><span class="cm-variable">T</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  } <span class="cm-keyword">else</span> <span class="cm-keyword">if</span> (<span class="cm-variable">rnd</span> <span class="cm-operator">==</span> <span class="cm-variable">FALSE</span> <span class="cm-operator">|</span> <span class="cm-variable">rnd</span> <span class="cm-operator">==</span> <span class="cm-variable">F</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">as.character</span>(<span class="cm-variable">formatC</span>(<span class="cm-variable">quantile</span>(<span class="cm-variable">df</span>[[<span class="cm-variable">variable</span>]]), <span class="cm-variable">digits</span> <span class="cm-operator">=</span> <span class="cm-number">3</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">c</span>(<span class="cm-number">.01</span>,<span class="cm-number">.2</span>,<span class="cm-number">.4</span>,<span class="cm-number">.6</span>,<span class="cm-number">.8</span>), <span class="cm-variable">na.rm</span><span class="cm-operator">=</span><span class="cm-variable">T</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">q5</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-keyword">function</span>(<span class="cm-variable">variable</span>) {<span class="cm-variable">as.factor</span>(<span class="cm-variable">ntile</span>(<span class="cm-variable">variable</span>, <span class="cm-number">5</span>))}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 230px;"></div><div class="CodeMirror-gutters" style="display: none; height: 230px;"></div></div></div></pre><h5><a name="load-hexadecimal-color-palette" class="md-header-anchor"></a><span>Load hexadecimal color palette</span></h5><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="r"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">palette5</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-string">"#f0f9e8"</span>,<span class="cm-string">"#bae4bc"</span>,<span class="cm-string">"#7bccc4"</span>,<span class="cm-string">"#43a2ca"</span>,<span class="cm-string">"#0868ac"</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><h5><a name="load-census-api-key" class="md-header-anchor"></a><span>Load census API key</span></h5><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R "><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r "><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">census_api_key</span>(<span class="cm-string">"61f5998ae3ee7a7ab62b29f55769a3b864515ac4"</span>, <span class="cm-variable">overwrite</span> <span class="cm-operator">=</span> <span class="cm-variable">TRUE</span>, <span class="cm-variable">install</span> <span class="cm-operator">=</span> <span class="cm-variable">TRUE</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><h5><a name="load-multiple-rings-buffer-function" class="md-header-anchor"></a><span>Load multiple rings buffer function</span></h5><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="r " style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r "><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">multipleRingBuffer</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-keyword">function</span>(<span class="cm-variable">inputPolygon</span>, <span class="cm-variable">maxDistance</span>, <span class="cm-variable">interval</span>) </span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">#create a list of distances that we'll iterate through to create each ring</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">distances</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">seq</span>(<span class="cm-number">0</span>, <span class="cm-variable">maxDistance</span>, <span class="cm-variable">interval</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">#we'll start with the second value in that list - the first is '0'</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">distancesCounter</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-number">2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">#total number of rings we're going to create</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">numberOfRings</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">floor</span>(<span class="cm-variable">maxDistance</span> <span class="cm-operator">/</span> <span class="cm-variable">interval</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">#a counter of number of rings</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">numberOfRingsCounter</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">#initialize an otuput data frame (that is not an sf)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">allRings</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">data.frame</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">#while number of rings  counteris less than the specified nubmer of rings</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">while</span> (<span class="cm-variable">numberOfRingsCounter</span> <span class="cm-operator">&lt;=</span> <span class="cm-variable">numberOfRings</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">#if we're interested in a negative buffer and this is the first buffer</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">#(ie. not distance = '0' in the distances list)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span>(<span class="cm-variable">distances</span>[<span class="cm-variable">distancesCounter</span>] <span class="cm-operator">&lt;</span> <span class="cm-number">0</span> <span class="cm-operator">&amp;</span> <span class="cm-variable">distancesCounter</span> <span class="cm-operator">==</span> <span class="cm-number">2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-comment">#buffer the input by the first distance</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">buffer1</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">st_buffer</span>(<span class="cm-variable">inputPolygon</span>, <span class="cm-variable">distances</span>[<span class="cm-variable">distancesCounter</span>])</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-comment">#different that buffer from the input polygon to get the first ring</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">buffer1_</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">st_difference</span>(<span class="cm-variable">inputPolygon</span>, <span class="cm-variable">buffer1</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-comment">#cast this sf as a polygon geometry type</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">thisRing</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">st_cast</span>(<span class="cm-variable">buffer1_</span>, <span class="cm-string">"POLYGON"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-comment">#take the last column which is 'geometry'</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">thisRing</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">as.data.frame</span>(<span class="cm-variable">thisRing</span>[,<span class="cm-variable">ncol</span>(<span class="cm-variable">thisRing</span>)])</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-comment">#add a new field, 'distance' so we know how far the distance is for a give ring</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">thisRing</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">distance</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">distances</span>[<span class="cm-variable">distancesCounter</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">#otherwise, if this is the second or more ring (and a negative buffer)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">else</span> <span class="cm-keyword">if</span>(<span class="cm-variable">distances</span>[<span class="cm-variable">distancesCounter</span>] <span class="cm-operator">&lt;</span> <span class="cm-number">0</span> <span class="cm-operator">&amp;</span> <span class="cm-variable">distancesCounter</span> <span class="cm-operator">&gt;</span> <span class="cm-number">2</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-comment">#buffer by a specific distance</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">buffer1</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">st_buffer</span>(<span class="cm-variable">inputPolygon</span>, <span class="cm-variable">distances</span>[<span class="cm-variable">distancesCounter</span>])</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-comment">#create the next smallest buffer</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">buffer2</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">st_buffer</span>(<span class="cm-variable">inputPolygon</span>, <span class="cm-variable">distances</span>[<span class="cm-variable">distancesCounter</span><span class="cm-operator">-</span><span class="cm-number">1</span>])</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-comment">#This can then be used to difference out a buffer running from 660 to 1320</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-comment">#This works because differencing 1320ft by 660ft = a buffer between 660 &amp; 1320.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-comment">#bc the area after 660ft in buffer2 = NA.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">thisRing</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">st_difference</span>(<span class="cm-variable">buffer2</span>,<span class="cm-variable">buffer1</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-comment">#cast as apolygon</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">thisRing</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">st_cast</span>(<span class="cm-variable">thisRing</span>, <span class="cm-string">"POLYGON"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-comment">#get the last field</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">thisRing</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">as.data.frame</span>(<span class="cm-variable">thisRing</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">geometry</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-comment">#create the distance field</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">thisRing</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">distance</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">distances</span>[<span class="cm-variable">distancesCounter</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">#Otherwise, if its a positive buffer</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">else</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-comment">#Create a positive buffer</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">buffer1</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">st_buffer</span>(<span class="cm-variable">inputPolygon</span>, <span class="cm-variable">distances</span>[<span class="cm-variable">distancesCounter</span>])</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-comment">#create a positive buffer that is one distance smaller. So if its the first buffer</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-comment">#distance, buffer1_ will = 0. </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">buffer1_</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">st_buffer</span>(<span class="cm-variable">inputPolygon</span>, <span class="cm-variable">distances</span>[<span class="cm-variable">distancesCounter</span><span class="cm-operator">-</span><span class="cm-number">1</span>])</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-comment">#difference the two buffers</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">thisRing</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">st_difference</span>(<span class="cm-variable">buffer1</span>,<span class="cm-variable">buffer1_</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-comment">#cast as a polygon</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">thisRing</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">st_cast</span>(<span class="cm-variable">thisRing</span>, <span class="cm-string">"POLYGON"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-comment">#geometry column as a data frame</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">thisRing</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">as.data.frame</span>(<span class="cm-variable">thisRing</span>[,<span class="cm-variable">ncol</span>(<span class="cm-variable">thisRing</span>)])</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-comment">#add teh distance</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">thisRing</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">distance</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">distances</span>[<span class="cm-variable">distancesCounter</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  } &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">#rbind this ring to the rest of the rings</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">allRings</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">rbind</span>(<span class="cm-variable">allRings</span>, <span class="cm-variable">thisRing</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">#iterate the distance counter</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">distancesCounter</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">distancesCounter</span> <span class="cm-operator">+</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">#iterate the number of rings counter</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">numberOfRingsCounter</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">numberOfRingsCounter</span> <span class="cm-operator">+</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">#convert the allRings data frame to an sf data frame</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">allRings</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">st_as_sf</span>(<span class="cm-variable">allRings</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1840px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1840px;"></div></div></div></pre><h4><a name="3-data-wrangling" class="md-header-anchor"></a><span>3. Data Wrangling</span></h4><h5><a name="wrangling-census-tracts-data" class="md-header-anchor"></a><span>Wrangling Census Tracts Data</span></h5><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">options</span>(<span class="cm-variable">tigris_use_cache</span> <span class="cm-operator">=</span> <span class="cm-variable">TRUE</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">city_bound_LA</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">st_read</span>(<span class="cm-string">'https://opendata.arcgis.com/datasets/09f503229d37414a8e67a7b6ceb9ec43_7.geojson'</span>) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">st_transform</span>(<span class="cm-string">'ESRI:102241'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">tracts09</span> <span class="cm-operator cm-arrow">&lt;-</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">get_acs</span>(<span class="cm-variable">geography</span> <span class="cm-operator">=</span> <span class="cm-string">"tract"</span>, <span class="cm-variable">variables</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-string">"B25026_001E"</span>,<span class="cm-string">"B02001_002E"</span>,<span class="cm-string">"B15001_050E"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-string">"B15001_009E"</span>,<span class="cm-string">"B19013_001E"</span>,<span class="cm-string">"B25058_001E"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-string">"B06012_002E"</span>), </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">year</span><span class="cm-operator">=</span><span class="cm-number">2009</span>, <span class="cm-variable">state</span><span class="cm-operator">=</span><span class="cm-number">06</span>, <span class="cm-variable">county</span><span class="cm-operator">=</span><span class="cm-number">037</span>, <span class="cm-variable">geometry</span><span class="cm-operator">=</span><span class="cm-variable">T</span>, <span class="cm-variable">output</span><span class="cm-operator">=</span><span class="cm-string">"wide"</span>) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">st_transform</span>(<span class="cm-string">'ESRI:102241'</span>) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">rename</span>(<span class="cm-variable">TotalPop</span> <span class="cm-operator">=</span> <span class="cm-variable">B25026_001E</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Whites</span> <span class="cm-operator">=</span> <span class="cm-variable">B02001_002E</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">FemaleBachelors</span> <span class="cm-operator">=</span> <span class="cm-variable">B15001_050E</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">MaleBachelors</span> <span class="cm-operator">=</span> <span class="cm-variable">B15001_009E</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">MedHHInc</span> <span class="cm-operator">=</span> <span class="cm-variable">B19013_001E</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">MedRent</span> <span class="cm-operator">=</span> <span class="cm-variable">B25058_001E</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">TotalPoverty</span> <span class="cm-operator">=</span> <span class="cm-variable">B06012_002E</span>) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">dplyr</span><span class="cm-operator">::</span><span class="cm-variable">select</span>(<span class="cm-operator">-</span><span class="cm-variable">NAME</span>, <span class="cm-operator">-</span><span class="cm-variable">starts_with</span>(<span class="cm-string">"B"</span>)) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">mutate</span>(<span class="cm-variable">pctWhite</span> <span class="cm-operator">=</span> <span class="cm-variable">ifelse</span>(<span class="cm-variable">TotalPop</span> <span class="cm-operator">&gt;</span> <span class="cm-number">0</span>, <span class="cm-variable">Whites</span> <span class="cm-operator">/</span> <span class="cm-variable">TotalPop</span>,<span class="cm-number">0</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">pctBachelors</span> <span class="cm-operator">=</span> <span class="cm-variable">ifelse</span>(<span class="cm-variable">TotalPop</span> <span class="cm-operator">&gt;</span> <span class="cm-number">0</span>, ((<span class="cm-variable">FemaleBachelors</span> <span class="cm-operator">+</span> <span class="cm-variable">MaleBachelors</span>) <span class="cm-operator">/</span> <span class="cm-variable">TotalPop</span>),<span class="cm-number">0</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">pctPoverty</span> <span class="cm-operator">=</span> <span class="cm-variable">ifelse</span>(<span class="cm-variable">TotalPop</span> <span class="cm-operator">&gt;</span> <span class="cm-number">0</span>, <span class="cm-variable">TotalPoverty</span> <span class="cm-operator">/</span> <span class="cm-variable">TotalPop</span>, <span class="cm-number">0</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">year</span> <span class="cm-operator">=</span> <span class="cm-string">"2009"</span>) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">dplyr</span><span class="cm-operator">::</span><span class="cm-variable">select</span>(<span class="cm-operator">-</span><span class="cm-variable">Whites</span>, <span class="cm-operator">-</span><span class="cm-variable">FemaleBachelors</span>, <span class="cm-operator">-</span><span class="cm-variable">MaleBachelors</span>, <span class="cm-operator">-</span><span class="cm-variable">TotalPoverty</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">tracts09</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">tracts09</span>[<span class="cm-variable">city_bound_LA</span>,] </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">tracts18</span> <span class="cm-operator cm-arrow">&lt;-</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">get_acs</span>(<span class="cm-variable">geography</span> <span class="cm-operator">=</span> <span class="cm-string">"tract"</span>, <span class="cm-variable">variables</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-string">"B25026_001E"</span>,<span class="cm-string">"B02001_002E"</span>,<span class="cm-string">"B15001_050E"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-string">"B15001_009E"</span>,<span class="cm-string">"B19013_001E"</span>,<span class="cm-string">"B25058_001E"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-string">"B06012_002E"</span>), </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">year</span><span class="cm-operator">=</span><span class="cm-number">2018</span>, <span class="cm-variable">state</span><span class="cm-operator">=</span><span class="cm-number">06</span>, <span class="cm-variable">county</span><span class="cm-operator">=</span><span class="cm-number">037</span>, <span class="cm-variable">geometry</span><span class="cm-operator">=</span><span class="cm-variable">T</span>, <span class="cm-variable">output</span><span class="cm-operator">=</span><span class="cm-string">"wide"</span>) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">st_transform</span>(<span class="cm-string">'ESRI:102241'</span>) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">rename</span>(<span class="cm-variable">TotalPop</span> <span class="cm-operator">=</span> <span class="cm-variable">B25026_001E</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Whites</span> <span class="cm-operator">=</span> <span class="cm-variable">B02001_002E</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">FemaleBachelors</span> <span class="cm-operator">=</span> <span class="cm-variable">B15001_050E</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">MaleBachelors</span> <span class="cm-operator">=</span> <span class="cm-variable">B15001_009E</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">MedHHInc</span> <span class="cm-operator">=</span> <span class="cm-variable">B19013_001E</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">MedRent</span> <span class="cm-operator">=</span> <span class="cm-variable">B25058_001E</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">TotalPoverty</span> <span class="cm-operator">=</span> <span class="cm-variable">B06012_002E</span>) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">dplyr</span><span class="cm-operator">::</span><span class="cm-variable">select</span>(<span class="cm-operator">-</span><span class="cm-variable">NAME</span>, <span class="cm-operator">-</span><span class="cm-variable">starts_with</span>(<span class="cm-string">"B"</span>)) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">mutate</span>(<span class="cm-variable">pctWhite</span> <span class="cm-operator">=</span> <span class="cm-variable">ifelse</span>(<span class="cm-variable">TotalPop</span> <span class="cm-operator">&gt;</span> <span class="cm-number">0</span>, <span class="cm-variable">Whites</span> <span class="cm-operator">/</span> <span class="cm-variable">TotalPop</span>,<span class="cm-number">0</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">pctBachelors</span> <span class="cm-operator">=</span> <span class="cm-variable">ifelse</span>(<span class="cm-variable">TotalPop</span> <span class="cm-operator">&gt;</span> <span class="cm-number">0</span>, ((<span class="cm-variable">FemaleBachelors</span> <span class="cm-operator">+</span> <span class="cm-variable">MaleBachelors</span>) <span class="cm-operator">/</span> <span class="cm-variable">TotalPop</span>),<span class="cm-number">0</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">pctPoverty</span> <span class="cm-operator">=</span> <span class="cm-variable">ifelse</span>(<span class="cm-variable">TotalPop</span> <span class="cm-operator">&gt;</span> <span class="cm-number">0</span>, <span class="cm-variable">TotalPoverty</span> <span class="cm-operator">/</span> <span class="cm-variable">TotalPop</span>, <span class="cm-number">0</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">year</span> <span class="cm-operator">=</span> <span class="cm-string">"2018"</span>) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">dplyr</span><span class="cm-operator">::</span><span class="cm-variable">select</span>(<span class="cm-operator">-</span><span class="cm-variable">Whites</span>, <span class="cm-operator">-</span><span class="cm-variable">FemaleBachelors</span>, <span class="cm-operator">-</span><span class="cm-variable">MaleBachelors</span>, <span class="cm-operator">-</span><span class="cm-variable">TotalPoverty</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">tracts18</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">tracts18</span>[<span class="cm-variable">city_bound_LA</span>,] </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1104px;"></div></div></div></pre><p><img src="https://github.com/ihcgnahz/MUSA-508-assignment1/blob/master/metro_station.png?raw=true" alt="metro_station" style="zoom:;" /></p><p>&nbsp;</p><p><span>Notice that the Expo Line was built in 2012, and the part of Gold Line beyond the boundary was built in 2016.</span></p><h5><a name="wrangling-transit-open-data" class="md-header-anchor"></a><span>Wrangling Transit Open Data</span></h5><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">station_2018</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">st_read</span>(<span class="cm-string">'F:</span><span class="cm-string-2">\\</span><span class="cm-string">MUSA</span><span class="cm-string-2">\\</span><span class="cm-string">MUSA-505</span><span class="cm-string-2">\\</span><span class="cm-string">assignment1</span><span class="cm-string-2">\\</span><span class="cm-string">station'</span>)<span class="cm-operator cm-variable-2">%&gt;%</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">select</span>(<span class="cm-variable">MetroLine</span>, <span class="cm-variable">Station</span>) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">st_transform</span>(<span class="cm-variable">st_crs</span>(<span class="cm-variable">tracts09</span>)) &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">station_2009</span> <span class="cm-operator cm-arrow">&lt;-</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">station_2018</span>[<span class="cm-operator">!</span>(<span class="cm-variable">station_2018</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">MetroLine</span><span class="cm-operator">==</span><span class="cm-string">'Expo Line'</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-variable">station_2018</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Station</span><span class="cm-operator">==</span><span class="cm-string">'Arcadia Station'</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-variable">station_2018</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Station</span><span class="cm-operator">==</span><span class="cm-string">'Monrovia Station'</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-variable">station_2018</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Station</span><span class="cm-operator">==</span><span class="cm-string">'Duarte / City of Hope Station'</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-variable">station_2018</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Station</span><span class="cm-operator">==</span><span class="cm-string">'Irwindale Station'</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-variable">station_2018</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Station</span><span class="cm-operator">==</span><span class="cm-string">'Azusa Downtown Station'</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-variable">station_2018</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Station</span><span class="cm-operator">==</span><span class="cm-string">'APU / Citrus College Station'</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-variable">station_2018</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Station</span><span class="cm-operator">==</span><span class="cm-string">'Pico Station'</span>),]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 0.5 Mile = 804.67 Meters</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">metroBuffers_2009</span> <span class="cm-operator cm-arrow">&lt;-</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">rbind</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">st_buffer</span>(<span class="cm-variable">station_2009</span>, <span class="cm-number">804.67</span>) <span class="cm-operator cm-variable-2">%&gt;%</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">mutate</span>(<span class="cm-variable">Legend</span> <span class="cm-operator">=</span> <span class="cm-string">"Buffer09"</span>) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">dplyr</span><span class="cm-operator">::</span><span class="cm-variable">select</span>(<span class="cm-variable">Legend</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">st_union</span>(<span class="cm-variable">st_buffer</span>(<span class="cm-variable">station_2009</span>, <span class="cm-number">804.67</span>)) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">st_sf</span>() <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">mutate</span>(<span class="cm-variable">Legend</span> <span class="cm-operator">=</span> <span class="cm-string">"Unioned Buffer 2009"</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">metroBuffers_2018</span> <span class="cm-operator cm-arrow">&lt;-</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">rbind</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">st_buffer</span>(<span class="cm-variable">station_2018</span>, <span class="cm-number">804.67</span>) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">mutate</span>(<span class="cm-variable">Legend</span> <span class="cm-operator">=</span> <span class="cm-string">"Buffer18"</span>) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">dplyr</span><span class="cm-operator">::</span><span class="cm-variable">select</span>(<span class="cm-variable">Legend</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">st_union</span>(<span class="cm-variable">st_buffer</span>(<span class="cm-variable">station_2018</span>, <span class="cm-number">804.67</span>)) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">st_sf</span>() <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">mutate</span>(<span class="cm-variable">Legend</span> <span class="cm-operator">=</span> <span class="cm-string">"Unioned Buffer 2018"</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">buffer_2009</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">filter</span>(<span class="cm-variable">metroBuffers_2009</span>, <span class="cm-variable">Legend</span><span class="cm-operator">==</span><span class="cm-string">"Unioned Buffer 2009"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">buffer_2018</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">filter</span>(<span class="cm-variable">metroBuffers_2018</span>, <span class="cm-variable">Legend</span><span class="cm-operator">==</span><span class="cm-string">"Unioned Buffer 2018"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">buffer.group</span> <span class="cm-operator">=</span> <span class="cm-variable">rbind</span>(<span class="cm-variable">buffer_2009</span>,<span class="cm-variable">buffer_2018</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ggplot</span>() <span class="cm-operator">+</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_sf</span>(<span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">st_union</span>(<span class="cm-variable">tracts18</span>)) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_sf</span>(<span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">station_2018</span>, <span class="cm-variable">aes</span>(<span class="cm-variable">colour</span> <span class="cm-operator">=</span> <span class="cm-variable">MetroLine</span>), <span class="cm-variable">show.legend</span> <span class="cm-operator">=</span> <span class="cm-string">"point"</span>, <span class="cm-variable">size</span><span class="cm-operator">=</span> <span class="cm-number">2</span>) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">scale_colour_manual</span>(<span class="cm-variable">values</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-string">"#0068b7"</span>,<span class="cm-string">"#34bbe8"</span>,<span class="cm-string">"#fabe00"</span>,<span class="cm-string">"#6cbb5a"</span>,<span class="cm-string">"purple"</span>,<span class="cm-string">"red"</span>)) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">labs</span>(<span class="cm-variable">title</span><span class="cm-operator">=</span><span class="cm-string">"Metro Station, 2018"</span>, <span class="cm-variable">subtitle</span><span class="cm-operator">=</span><span class="cm-string">"Los Angeles, CA"</span>, <span class="cm-variable">caption</span><span class="cm-operator">=</span><span class="cm-string">"Figure 5"</span>) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">mapTheme</span>()</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 989px;"></div><div class="CodeMirror-gutters" style="display: none; height: 989px;"></div></div></div></pre><h5><a name="relating-metro-stations-and-tracts" class="md-header-anchor"></a><span>Relating Metro Stations and Tracts</span></h5><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 2009</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">buffer_2009</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">filter</span>(<span class="cm-variable">metroBuffers_2009</span>, <span class="cm-variable">Legend</span><span class="cm-operator">==</span><span class="cm-string">"Unioned Buffer 2009"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Tracts.2009</span> <span class="cm-operator cm-arrow">&lt;-</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">rbind</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">st_centroid</span>(<span class="cm-variable">tracts09</span>)[<span class="cm-variable">buffer_2009</span>,] <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">st_drop_geometry</span>() <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">left_join</span>(<span class="cm-variable">allTracts</span>) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">st_sf</span>() <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">mutate</span>(<span class="cm-variable">TOD</span> <span class="cm-operator">=</span> <span class="cm-string">"TOD"</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">st_centroid</span>(<span class="cm-variable">tracts09</span>)[<span class="cm-variable">buffer_2009</span>, <span class="cm-variable">op</span> <span class="cm-operator">=</span> <span class="cm-variable">st_disjoint</span>] <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">st_drop_geometry</span>() <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">left_join</span>(<span class="cm-variable">tracts09</span>) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">st_sf</span>() <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">mutate</span>(<span class="cm-variable">TOD</span> <span class="cm-operator">=</span> <span class="cm-string">"Non-TOD"</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Tracts.2009.inf</span> <span class="cm-operator cm-arrow">&lt;-</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">rbind</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">st_centroid</span>(<span class="cm-variable">tracts09</span>)[<span class="cm-variable">buffer_2009</span>,] <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">st_drop_geometry</span>() <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">left_join</span>(<span class="cm-variable">allTracts</span>) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">st_sf</span>() <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">mutate</span>(<span class="cm-variable">TOD</span> <span class="cm-operator">=</span> <span class="cm-string">"TOD"</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">st_centroid</span>(<span class="cm-variable">tracts09</span>)[<span class="cm-variable">buffer_2009</span>, <span class="cm-variable">op</span> <span class="cm-operator">=</span> <span class="cm-variable">st_disjoint</span>] <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">st_drop_geometry</span>() <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">left_join</span>(<span class="cm-variable">tracts09</span>) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">st_sf</span>() <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">mutate</span>(<span class="cm-variable">TOD</span> <span class="cm-operator">=</span> <span class="cm-string">"Non-TOD"</span>))<span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">mutate</span>(<span class="cm-variable">MedRent.inf</span> <span class="cm-operator">=</span> <span class="cm-variable">ifelse</span>(<span class="cm-variable">year</span> <span class="cm-operator">==</span> <span class="cm-string">"2009"</span>, <span class="cm-variable">MedRent</span> <span class="cm-operator">*</span> <span class="cm-number">1.17</span>, <span class="cm-variable">MedRent</span>)) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 2018</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">buffer_2018</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">filter</span>(<span class="cm-variable">metroBuffers_2018</span>, <span class="cm-variable">Legend</span><span class="cm-operator">==</span><span class="cm-string">"Unioned Buffer 2018"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Tracts.2018</span> <span class="cm-operator cm-arrow">&lt;-</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">rbind</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">st_centroid</span>(<span class="cm-variable">tracts18</span>)[<span class="cm-variable">buffer_2018</span>,] <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">st_drop_geometry</span>() <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">left_join</span>(<span class="cm-variable">tracts18</span>) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">st_sf</span>() <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">mutate</span>(<span class="cm-variable">TOD</span> <span class="cm-operator">=</span> <span class="cm-string">"TOD"</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">st_centroid</span>(<span class="cm-variable">tracts18</span>)[<span class="cm-variable">buffer_2018</span>, <span class="cm-variable">op</span> <span class="cm-operator">=</span> <span class="cm-variable">st_disjoint</span>] <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">st_drop_geometry</span>() <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">left_join</span>(<span class="cm-variable">tracts18</span>) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">st_sf</span>() <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">mutate</span>(<span class="cm-variable">TOD</span> <span class="cm-operator">=</span> <span class="cm-string">"Non-TOD"</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Combine data</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">allTracts.group</span> <span class="cm-operator cm-arrow">&lt;-</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">rbind</span>(<span class="cm-variable">Tracts.2009</span>,<span class="cm-variable">Tracts.2018</span>)<span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">mutate</span>(<span class="cm-variable">MedRent.inf</span> <span class="cm-operator">=</span> <span class="cm-variable">ifelse</span>(<span class="cm-variable">year</span> <span class="cm-operator">==</span> <span class="cm-string">"2009"</span>, <span class="cm-variable">MedRent</span> <span class="cm-operator">*</span> <span class="cm-number">1.17</span>, <span class="cm-variable">MedRent</span>)) </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1242px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1242px;"></div></div></div></pre><p>&nbsp;</p><h4><a name="4-tod-indicators-analytics" class="md-header-anchor"></a><span>4. TOD Indicators Analytics</span></h4><h5><a name="tod---census-variables" class="md-header-anchor"></a><span>TOD - Census Variables</span></h5><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Population</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ggplot</span>(<span class="cm-variable">allTracts.group</span>)<span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_sf</span>(<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">st_union</span>(<span class="cm-variable">Tracts.2009</span>))<span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_sf</span>(<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">st_union</span>(<span class="cm-variable">Tracts.2018</span>))<span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_sf</span>(<span class="cm-variable">aes</span>(<span class="cm-variable">fill</span> <span class="cm-operator">=</span> <span class="cm-variable">q5</span>(<span class="cm-variable">TotalPop</span>))) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_sf</span>(<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">buffer_2018</span>, <span class="cm-variable">fill</span> <span class="cm-operator">=</span> <span class="cm-string">"transparent"</span>, <span class="cm-variable">color</span> <span class="cm-operator">=</span> <span class="cm-string">"red"</span>) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_sf</span>(<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">buffer_2009</span>, <span class="cm-variable">fill</span> <span class="cm-operator">=</span> <span class="cm-string">"transparent"</span>, <span class="cm-variable">color</span> <span class="cm-operator">=</span> <span class="cm-string">"blue"</span>)<span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">scale_fill_manual</span>(<span class="cm-variable">values</span> <span class="cm-operator">=</span> <span class="cm-variable">palette5</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">labels</span> <span class="cm-operator">=</span> <span class="cm-variable">qBr</span>(<span class="cm-variable">allTracts.group</span>, <span class="cm-string">"TotalPop"</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">name</span> <span class="cm-operator">=</span> <span class="cm-string">"Population</span><span class="cm-string-2">\n</span><span class="cm-string">(Quintile Breaks)"</span>) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">labs</span>(<span class="cm-variable">title</span> <span class="cm-operator">=</span> <span class="cm-string">"Total Population 2009-2018"</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">subtitle</span> <span class="cm-operator">=</span> <span class="cm-string">"Counts of People; Blue border denotes area close to metro stations in 2009, the red represents area close to new stations"</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">caption</span> <span class="cm-operator">=</span> <span class="cm-string">"Figure 1.1: TOD Indicators - Total Population"</span>) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">facet_wrap</span>(<span class="cm-operator">~</span><span class="cm-variable">year</span>)<span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">mapTheme</span>() <span class="cm-operator">+</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">theme</span>(<span class="cm-variable">plot.title</span> <span class="cm-operator">=</span> <span class="cm-variable">element_text</span>(<span class="cm-variable">size</span><span class="cm-operator">=</span><span class="cm-number">22</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 414px;"></div><div class="CodeMirror-gutters" style="display: none; height: 414px;"></div></div></div></pre><p><img src="https://github.com/ihcgnahz/MUSA-508-assignment1/blob/master/1.1.png?raw=true" referrerpolicy="no-referrer" alt="image-20200925144205494"></p><p>&nbsp;</p><p><span>The population around Expo Line had a slight growth in 2019, while with the extension of Gold Line, the population around the TOD even dropped within the boundary of Los Angeles .</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Median Rent</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ggplot</span>(<span class="cm-variable">allTracts.group</span>)<span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_sf</span>(<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">st_union</span>(<span class="cm-variable">Tracts.2009</span>))<span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_sf</span>(<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">st_union</span>(<span class="cm-variable">Tracts.2018</span>))<span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_sf</span>(<span class="cm-variable">aes</span>(<span class="cm-variable">fill</span> <span class="cm-operator">=</span> <span class="cm-variable">q5</span>(<span class="cm-variable">MedRent</span>))) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_sf</span>(<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">buffer_2018</span>, <span class="cm-variable">fill</span> <span class="cm-operator">=</span> <span class="cm-string">"transparent"</span>, <span class="cm-variable">color</span> <span class="cm-operator">=</span> <span class="cm-string">"red"</span>) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_sf</span>(<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">buffer_2009</span>, <span class="cm-variable">fill</span> <span class="cm-operator">=</span> <span class="cm-string">"transparent"</span>, <span class="cm-variable">color</span> <span class="cm-operator">=</span> <span class="cm-string">"blue"</span>)<span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">scale_fill_manual</span>(<span class="cm-variable">values</span> <span class="cm-operator">=</span> <span class="cm-variable">palette5</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">labels</span> <span class="cm-operator">=</span> <span class="cm-variable">qBr</span>(<span class="cm-variable">allTracts.group</span>, <span class="cm-string">"MedRent"</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">name</span> <span class="cm-operator">=</span> <span class="cm-string">"Rent</span><span class="cm-string-2">\n</span><span class="cm-string">(Quintile Breaks)"</span>) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">labs</span>(<span class="cm-variable">title</span> <span class="cm-operator">=</span> <span class="cm-string">"Median Rent 2009-2018"</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">subtitle</span> <span class="cm-operator">=</span> <span class="cm-string">"Real Dollars, Blue border denotes area close to metro stations in 2009, the red represents area close to new stations"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">caption</span> <span class="cm-operator">=</span> <span class="cm-string">"Figure 1.2: TOD Indicators - Median Rent"</span>) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">facet_wrap</span>(<span class="cm-operator">~</span><span class="cm-variable">year</span>)<span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">mapTheme</span>() <span class="cm-operator">+</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">theme</span>(<span class="cm-variable">plot.title</span> <span class="cm-operator">=</span> <span class="cm-variable">element_text</span>(<span class="cm-variable">size</span><span class="cm-operator">=</span><span class="cm-number">22</span>))</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 391px;"></div><div class="CodeMirror-gutters" style="display: none; height: 391px;"></div></div></div></pre><p><img src="https://github.com/ihcgnahz/MUSA-508-assignment1/blob/master/1.2.png?raw=true" referrerpolicy="no-referrer" alt="image-20200925144235622"></p><p>&nbsp;</p><p><span>Since median rent had a rapid growth in almost the whole metropolitan area. There is no sufficient evidence to support  the relevance between median rent and metro station merely based on the Fig 1.2.</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">allTracts.group.visual</span> <span class="cm-operator cm-arrow">&lt;-</span> </span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">rbind</span>(<span class="cm-variable">Tracts.2009</span>,<span class="cm-variable">Tracts.2018</span>)<span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">mutate</span>(<span class="cm-variable">MedRent.inf</span> <span class="cm-operator">=</span> <span class="cm-variable">ifelse</span>(<span class="cm-variable">year</span> <span class="cm-operator">==</span> <span class="cm-string">"2009"</span>, <span class="cm-variable">MedRent</span> <span class="cm-operator">*</span> <span class="cm-number">1.17</span>, <span class="cm-variable">MedRent</span>))<span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">mutate</span>(<span class="cm-variable">pctPoverty</span> <span class="cm-operator">=</span> <span class="cm-variable">pctPoverty</span> <span class="cm-operator">*</span> <span class="cm-number">100</span>) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">mutate</span>(<span class="cm-variable">pctBachelors</span> <span class="cm-operator">=</span> <span class="cm-variable">pctBachelors</span> <span class="cm-operator">*</span> <span class="cm-number">10000</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Poverty</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ggplot</span>(<span class="cm-variable">allTracts.group</span>)<span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_sf</span>(<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">st_union</span>(<span class="cm-variable">Tracts.2009</span>))<span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_sf</span>(<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">st_union</span>(<span class="cm-variable">Tracts.2018</span>))<span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_sf</span>(<span class="cm-variable">aes</span>(<span class="cm-variable">fill</span> <span class="cm-operator">=</span> <span class="cm-variable">q5</span>(<span class="cm-variable">pctPoverty</span>))) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_sf</span>(<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">buffer_2018</span>, <span class="cm-variable">fill</span> <span class="cm-operator">=</span> <span class="cm-string">"transparent"</span>, <span class="cm-variable">color</span> <span class="cm-operator">=</span> <span class="cm-string">"red"</span>) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_sf</span>(<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">buffer_2009</span>, <span class="cm-variable">fill</span> <span class="cm-operator">=</span> <span class="cm-string">"transparent"</span>, <span class="cm-variable">color</span> <span class="cm-operator">=</span> <span class="cm-string">"blue"</span>)<span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">scale_fill_manual</span>(<span class="cm-variable">values</span> <span class="cm-operator">=</span> <span class="cm-variable">palette5</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">labels</span> <span class="cm-operator">=</span> <span class="cm-variable">qBr</span>(<span class="cm-variable">allTracts.group</span>, <span class="cm-string">"pctPoverty"</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">name</span> <span class="cm-operator">=</span> <span class="cm-string">"Percent_Poverty</span><span class="cm-string-2">\n</span><span class="cm-string">(Quintile Breaks)"</span>) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">labs</span>(<span class="cm-variable">title</span> <span class="cm-operator">=</span> <span class="cm-string">"Percent of Poverty 2009-2018"</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">subtitle</span> <span class="cm-operator">=</span> <span class="cm-string">"Percentage(%); Blue border denotes area close to metro stations in 2009, the red represents area close to new stations"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">caption</span> <span class="cm-operator">=</span> <span class="cm-string">"Figure 1.3: TOD Indicators - Percentage of Poverty"</span>) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">facet_wrap</span>(<span class="cm-operator">~</span><span class="cm-variable">year</span>)<span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">mapTheme</span>() <span class="cm-operator">+</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">theme</span>(<span class="cm-variable">plot.title</span> <span class="cm-operator">=</span> <span class="cm-variable">element_text</span>(<span class="cm-variable">size</span><span class="cm-operator">=</span><span class="cm-number">22</span>))</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 529px;"></div><div class="CodeMirror-gutters" style="display: none; height: 529px;"></div></div></div></pre><p><img src="https://github.com/ihcgnahz/MUSA-508-assignment1/blob/master/1.3.png?raw=true" referrerpolicy="no-referrer" alt="image-20200925144354270"></p><p>&nbsp;</p><p><span>Around the buffer area, there is no significant change on percent of poverty.</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ggplot</span>(<span class="cm-variable">allTracts.group</span>)<span class="cm-operator">+</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_sf</span>(<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">st_union</span>(<span class="cm-variable">Tracts.2009</span>))<span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_sf</span>(<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">st_union</span>(<span class="cm-variable">Tracts.2018</span>))<span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_sf</span>(<span class="cm-variable">aes</span>(<span class="cm-variable">fill</span> <span class="cm-operator">=</span> <span class="cm-variable">q5</span>(<span class="cm-variable">pctBachelors</span>))) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_sf</span>(<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">buffer_2018</span>, <span class="cm-variable">fill</span> <span class="cm-operator">=</span> <span class="cm-string">"transparent"</span>, <span class="cm-variable">color</span> <span class="cm-operator">=</span> <span class="cm-string">"red"</span>) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_sf</span>(<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">buffer_2009</span>, <span class="cm-variable">fill</span> <span class="cm-operator">=</span> <span class="cm-string">"transparent"</span>, <span class="cm-variable">color</span> <span class="cm-operator">=</span> <span class="cm-string">"blue"</span>)<span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">scale_fill_manual</span>(<span class="cm-variable">values</span> <span class="cm-operator">=</span> <span class="cm-variable">palette5</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">labels</span> <span class="cm-operator">=</span> <span class="cm-variable">qBr</span>(<span class="cm-variable">allTracts.group</span>, <span class="cm-string">"pctBachelors"</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">name</span> <span class="cm-operator">=</span> <span class="cm-string">"Bachelors Per 10K Population</span><span class="cm-string-2">\n</span><span class="cm-string">(Quintile Breaks)"</span>) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">labs</span>(<span class="cm-variable">title</span> <span class="cm-operator">=</span> <span class="cm-string">"Bachelors Per 10K Population 2009-2018"</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">subtitle</span> <span class="cm-operator">=</span> <span class="cm-string">"1/10000; Blue border denotes area close to metro stations in 2009, the red represents area close to new stations"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">caption</span> <span class="cm-operator">=</span> <span class="cm-string">"Figure 1.4: TOD Indicators - Bachelor Per 10K"</span>) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">facet_wrap</span>(<span class="cm-operator">~</span><span class="cm-variable">year</span>)<span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">mapTheme</span>() <span class="cm-operator">+</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">theme</span>(<span class="cm-variable">plot.title</span> <span class="cm-operator">=</span> <span class="cm-variable">element_text</span>(<span class="cm-variable">size</span><span class="cm-operator">=</span><span class="cm-number">22</span>))</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 368px;"></div><div class="CodeMirror-gutters" style="display: none; height: 368px;"></div></div></div></pre><p><img src="https://github.com/ihcgnahz/MUSA-508-assignment1/blob/master/1.4.png?raw=true" referrerpolicy="no-referrer" alt="image-20200925144440512"></p><p>&nbsp;</p><p><span>Bachelors per 10k population raised around the buffer area. Especially significant surround stations of Expo Line and Gold Line.</span></p><h5><a name="tod-indicators-summary-table" class="md-header-anchor"></a><span>TOD Indicators Summary Table</span></h5><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="r"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">allTracts.Summary</span> <span class="cm-operator cm-arrow">&lt;-</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">st_drop_geometry</span>(<span class="cm-variable">allTracts.group</span>) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">group_by</span>(<span class="cm-variable">year</span>, <span class="cm-variable">TOD</span>) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">summarize</span>(<span class="cm-variable">Rent</span> <span class="cm-operator">=</span> <span class="cm-variable">mean</span>(<span class="cm-variable">MedRent</span>, <span class="cm-variable">na.rm</span> <span class="cm-operator">=</span> <span class="cm-variable">T</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Population</span> <span class="cm-operator">=</span> <span class="cm-variable">mean</span>(<span class="cm-variable">TotalPop</span>, <span class="cm-variable">na.rm</span> <span class="cm-operator">=</span> <span class="cm-variable">T</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Percentage_Poverty</span> <span class="cm-operator">=</span> <span class="cm-variable">mean</span>(<span class="cm-variable">pctPoverty</span><span class="cm-operator">*</span><span class="cm-number">100</span>, <span class="cm-variable">na.rm</span> <span class="cm-operator">=</span> <span class="cm-variable">T</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Bachelors_Per10K</span> <span class="cm-operator">=</span> <span class="cm-variable">mean</span>(<span class="cm-variable">pctBachelors</span><span class="cm-operator">*</span><span class="cm-number">10000</span>, <span class="cm-variable">na.rm</span> <span class="cm-operator">=</span> <span class="cm-variable">T</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">kable</span>(<span class="cm-variable">allTracts.Summary</span>) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">kable_styling</span>() <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">footnote</span>(<span class="cm-variable">general_title</span> <span class="cm-operator">=</span> <span class="cm-string">"</span><span class="cm-string-2">\n</span><span class="cm-string">"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">general</span> <span class="cm-operator">=</span> <span class="cm-string">"Table 1: TOD Indicators Summary Table: Los Angeles, 2009 versus 2018"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 299px;"></div><div class="CodeMirror-gutters" style="display: none; height: 299px;"></div></div></div></pre><p><img src="https://github.com/ihcgnahz/MUSA-508-assignment1/blob/master/Table.png?raw=true" referrerpolicy="no-referrer" alt="image-20200925160422219"></p><p>&nbsp;</p><h5><a name="tod-indicator-differences-time--space" class="md-header-anchor"></a><span>TOD Indicator Differences (Time &amp; Space)</span></h5><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="r"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Indicator differences across time and space</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">allTracts.Summary</span> <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">gather</span>(<span class="cm-variable">Variable</span>, <span class="cm-variable">Value</span>, <span class="cm-operator">-</span><span class="cm-variable">year</span>, <span class="cm-operator">-</span><span class="cm-variable">TOD</span>) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">ggplot</span>(<span class="cm-variable">aes</span>(<span class="cm-variable">year</span>, <span class="cm-variable">Value</span>, <span class="cm-variable">fill</span> <span class="cm-operator">=</span> <span class="cm-variable">TOD</span>)) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_bar</span>(<span class="cm-variable">stat</span> <span class="cm-operator">=</span> <span class="cm-string">"identity"</span>, <span class="cm-variable">position</span> <span class="cm-operator">=</span> <span class="cm-string">"dodge"</span>) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">facet_wrap</span>(<span class="cm-operator">~</span><span class="cm-variable">Variable</span>, <span class="cm-variable">scales</span> <span class="cm-operator">=</span> <span class="cm-string">"free"</span>, <span class="cm-variable">ncol</span><span class="cm-operator">=</span><span class="cm-number">5</span>) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">scale_fill_manual</span>(<span class="cm-variable">values</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-string">"#bae4bc"</span>, <span class="cm-string">"#0868ac"</span>)) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">labs</span>(<span class="cm-variable">title</span> <span class="cm-operator">=</span> <span class="cm-string">"TOD Indicator differences across time and space"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">caption</span> <span class="cm-operator">=</span> <span class="cm-string">"Figure 1.5: TOD Indicator Differences 2009 versus 2018"</span>) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">plotTheme</span>() <span class="cm-operator">+</span> <span class="cm-variable">theme</span>(<span class="cm-variable">legend.position</span><span class="cm-operator">=</span><span class="cm-string">"bottom"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 230px;"></div><div class="CodeMirror-gutters" style="display: none; height: 230px;"></div></div></div></pre><p><img src="https://github.com/ihcgnahz/MUSA-508-assignment1/blob/master/1.5.png?raw=true" referrerpolicy="no-referrer" alt="image-20200924130444824"></p><p>&nbsp;</p><p><strong><span>Percent Bachelors</span></strong><span>: </span></p><p><span>Percent bachelors had a general increase for the whole city. Compared with 2009, the percent of bachelors within TOD area exceeds that percent in non-TOD area, which is beyond normal recognition that meddle class and well-educated Americans are more likely to live in suburb area.  The growth rates within 0.5 miles of TOD area is 94.8%, which is far more than growth rates in non-TOD area.  </span></p><p><strong><span>Percent Poverty</span></strong><span>: </span></p><p><span>Percent poverty decreased for the whole metropolitan area from 2009 to 2018. The growth rates within 0.5 miles of TOD area is close to the non-TOD area.  </span></p><p><strong><span>Percent Population</span></strong><span>: </span></p><p><span>Percent population increased for the whole metropolitan area from 2009 to 2018. The growth rates within 0.5 miles of TOD area is close to the non-TOD area.  </span></p><p><strong><span>Median Rent</span></strong><span>: </span></p><p><span>Median rent increased for the whole metropolitan area from 2009 to 2018. The growth rates within 0.5 miles of TOD area is 48.9%, which is greater than 34.6% in non-TOD area. </span></p><h5><a name="graduated-symbol-maps" class="md-header-anchor"></a><span>Graduated Symbol Maps</span></h5><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#MedRent</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">rentByStation_09</span> <span class="cm-operator cm-arrow">&lt;-</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">pop_09</span> <span class="cm-operator cm-variable-2">%&gt;%</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">group_by</span>(<span class="cm-variable">Station</span>) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">summarize</span>(<span class="cm-variable">meanRent</span> <span class="cm-operator">=</span> <span class="cm-variable">mean</span>(<span class="cm-variable">MedRent.inf</span>)) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">st_drop_geometry</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">rentByStation_18</span> <span class="cm-operator cm-arrow">&lt;-</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">pop_18</span> <span class="cm-operator cm-variable-2">%&gt;%</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">group_by</span>(<span class="cm-variable">Station</span>) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">summarize</span>(<span class="cm-variable">meanRent</span> <span class="cm-operator">=</span> <span class="cm-variable">mean</span>(<span class="cm-variable">MedRent</span>)) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">st_drop_geometry</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">rent_sta_09</span><span class="cm-operator cm-arrow">&lt;-</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">left_join</span>(<span class="cm-variable">station_2009</span>, <span class="cm-variable">rentByStation_09</span>, <span class="cm-variable">by</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-string">'Station'</span> <span class="cm-operator">=</span> <span class="cm-string">'Station'</span>))<span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">mutate</span>(<span class="cm-variable">Year</span><span class="cm-operator">=</span><span class="cm-string">'2009'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">rent_sta_18</span><span class="cm-operator cm-arrow">&lt;-</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">left_join</span>(<span class="cm-variable">station_2018</span>, <span class="cm-variable">rentByStation_18</span>, <span class="cm-variable">by</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-string">'Station'</span> <span class="cm-operator">=</span> <span class="cm-string">'Station'</span>))<span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">mutate</span>(<span class="cm-variable">Year</span><span class="cm-operator">=</span><span class="cm-string">'2018'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">rent_sta.group</span> <span class="cm-operator cm-arrow">&lt;-</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">rbind</span>(<span class="cm-variable">rent_sta_09</span>,<span class="cm-variable">rent_sta_18</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ggplot</span>() <span class="cm-operator">+</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_sf</span>(<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">allTracts</span>, <span class="cm-variable">fill</span><span class="cm-operator">=</span><span class="cm-string">"black"</span>)<span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_sf</span>(<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">st_centroid</span>(<span class="cm-variable">rent_sta.group</span>), <span class="cm-variable">aes</span>(<span class="cm-variable">size</span> <span class="cm-operator">=</span> <span class="cm-variable">meanRent</span>), <span class="cm-variable">shape</span> <span class="cm-operator">=</span> <span class="cm-number">21</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">fill</span> <span class="cm-operator">=</span> <span class="cm-string">"red"</span>, <span class="cm-variable">alpha</span> <span class="cm-operator">=</span> <span class="cm-number">1</span>, <span class="cm-variable">show.legend</span> <span class="cm-operator">=</span> <span class="cm-string">"point"</span>) <span class="cm-operator">+</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">scale_size_continuous</span>(<span class="cm-variable">range</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">0.5</span>, <span class="cm-number">3</span>))<span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">facet_wrap</span>(<span class="cm-operator">~</span><span class="cm-variable">Year</span>)<span class="cm-operator">+</span><span class="cm-variable">mapTheme</span>()<span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">labs</span>(<span class="cm-variable">caption</span> <span class="cm-operator">=</span> <span class="cm-string">"Data:US Cencus Bureau, City of Los Angeles Open Data"</span>) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">labs</span>(<span class="cm-variable">title</span> <span class="cm-operator">=</span> <span class="cm-string">"Mean of MedRent Within 0.5 Mile of Each Transit 2009-2018"</span>, <span class="cm-variable">subtitle</span> <span class="cm-operator">=</span> <span class="cm-string">"Real Dollars"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 736px;"></div><div class="CodeMirror-gutters" style="display: none; height: 736px;"></div></div></div></pre><p><img src="https://github.com/ihcgnahz/MUSA-508-assignment1/blob/master/2.1.png?raw=true" referrerpolicy="no-referrer" alt="image-20200924131518694"></p><p>&nbsp;</p><p><span>With the graduated symbol maps, it indicates that average of median rent increased in several TOD area . The growth rate is especially significant around the joint of several metro lines in downtown.</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#Population</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">buffer09</span> <span class="cm-operator cm-arrow">&lt;-</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">st_transform</span>(<span class="cm-variable">station_2009</span>, <span class="cm-variable">st_crs</span>(<span class="cm-variable">tracts09</span>)) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">st_buffer</span>(<span class="cm-number">804.67</span>) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">dplyr</span><span class="cm-operator">::</span><span class="cm-variable">select</span>(<span class="cm-variable">Station</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">buffer18</span> <span class="cm-operator cm-arrow">&lt;-</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">st_transform</span>(<span class="cm-variable">station_2018</span>, <span class="cm-variable">st_crs</span>(<span class="cm-variable">tracts09</span>)) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">st_buffer</span>(<span class="cm-number">804.67</span>) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">dplyr</span><span class="cm-operator">::</span><span class="cm-variable">select</span>(<span class="cm-variable">Station</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">pop_09</span><span class="cm-operator cm-arrow">&lt;-</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">st_join</span>(<span class="cm-variable">Tracts.2009.inf</span>, <span class="cm-variable">buffer09</span>) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">filter</span>(<span class="cm-operator">!</span><span class="cm-variable">is.na</span>(<span class="cm-variable">Station</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">pop_18</span><span class="cm-operator cm-arrow">&lt;-</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">st_join</span>(<span class="cm-variable">Tracts.2018</span>, <span class="cm-variable">buffer18</span>) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">filter</span>(<span class="cm-operator">!</span><span class="cm-variable">is.na</span>(<span class="cm-variable">Station</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">popByStation_09</span> <span class="cm-operator cm-arrow">&lt;-</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">pop_09</span> <span class="cm-operator cm-variable-2">%&gt;%</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">group_by</span>(<span class="cm-variable">Station</span>) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">summarize</span>(<span class="cm-variable">sumPop</span> <span class="cm-operator">=</span> <span class="cm-variable">sum</span>(<span class="cm-variable">TotalPop</span>)) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">st_drop_geometry</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">popByStation_18</span> <span class="cm-operator cm-arrow">&lt;-</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">pop_18</span> <span class="cm-operator cm-variable-2">%&gt;%</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">group_by</span>(<span class="cm-variable">Station</span>) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">summarize</span>(<span class="cm-variable">sumPop</span> <span class="cm-operator">=</span> <span class="cm-variable">sum</span>(<span class="cm-variable">TotalPop</span>)) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">st_drop_geometry</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">pop_sta_09</span><span class="cm-operator cm-arrow">&lt;-</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">left_join</span>(<span class="cm-variable">station_2009</span>, <span class="cm-variable">popByStation_09</span>, <span class="cm-variable">by</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-string">'Station'</span> <span class="cm-operator">=</span> <span class="cm-string">'Station'</span>))<span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">mutate</span>(<span class="cm-variable">Year</span><span class="cm-operator">=</span><span class="cm-string">'2009'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">pop_sta_18</span><span class="cm-operator cm-arrow">&lt;-</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">left_join</span>(<span class="cm-variable">station_2018</span>, <span class="cm-variable">popByStation_18</span>, <span class="cm-variable">by</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-string">'Station'</span> <span class="cm-operator">=</span> <span class="cm-string">'Station'</span>))<span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">mutate</span>(<span class="cm-variable">Year</span><span class="cm-operator">=</span><span class="cm-string">'2018'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">pop_sta.group</span> <span class="cm-operator cm-arrow">&lt;-</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">rbind</span>(<span class="cm-variable">pop_sta_09</span>,<span class="cm-variable">pop_sta_18</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ggplot</span>() <span class="cm-operator">+</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_sf</span>(<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">allTracts</span>, <span class="cm-variable">fill</span><span class="cm-operator">=</span><span class="cm-string">"black"</span>)<span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_sf</span>(<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">st_centroid</span>(<span class="cm-variable">pop_sta.group</span>), <span class="cm-variable">aes</span>(<span class="cm-variable">size</span> <span class="cm-operator">=</span> <span class="cm-variable">sumPop</span>), <span class="cm-variable">shape</span> <span class="cm-operator">=</span> <span class="cm-number">21</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">fill</span> <span class="cm-operator">=</span> <span class="cm-string">"lightblue"</span>, <span class="cm-variable">alpha</span> <span class="cm-operator">=</span> <span class="cm-number">1</span>, <span class="cm-variable">show.legend</span> <span class="cm-operator">=</span> <span class="cm-string">"point"</span>) <span class="cm-operator">+</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">scale_size_continuous</span>(<span class="cm-variable">range</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">0.5</span>, <span class="cm-number">3</span>))<span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">facet_wrap</span>(<span class="cm-operator">~</span><span class="cm-variable">Year</span>)<span class="cm-operator">+</span><span class="cm-variable">mapTheme</span>()<span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">labs</span>(<span class="cm-variable">caption</span> <span class="cm-operator">=</span> <span class="cm-string">"Data:US Cencus Bureau, City of Los Angeles Open Data"</span>) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">labs</span>(<span class="cm-variable">title</span> <span class="cm-operator">=</span> <span class="cm-string">"Population Within 0.5 Mile of Each Metro Station 2009-2018"</span>, <span class="cm-variable">subtitle</span> <span class="cm-operator">=</span> <span class="cm-string">"Counts of People"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1150px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1150px;"></div></div></div></pre><p><img src="https://github.com/ihcgnahz/MUSA-508-assignment1/blob/master/2.2.png?raw=true" referrerpolicy="no-referrer" alt="image-20200924131815174"></p><p>&nbsp;</p><p><span>Comparing the graphic of  2009 and 2018, there is no significant booming of population within 0.5 miles of  metro station.</span></p><h5><a name="mean-rent-as-a-function-of-distance-to-subway-stations" class="md-header-anchor"></a><span>Mean Rent as a function of Distance to Subway Stations</span></h5><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#multirings_2009</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#0.5 Mile = 804.67 Meters</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">multirings_2009</span> <span class="cm-operator cm-arrow">&lt;-</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">st_join</span>(<span class="cm-variable">st_centroid</span>(<span class="cm-variable">dplyr</span><span class="cm-operator">::</span><span class="cm-variable">select</span>(<span class="cm-variable">Tracts.2009.inf</span>, <span class="cm-variable">GEOID</span>, <span class="cm-variable">year</span>)), </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">multipleRingBuffer</span>(<span class="cm-variable">st_union</span>(<span class="cm-variable">station_2009</span>), <span class="cm-number">16898.07</span>, <span class="cm-number">804.67</span>)) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">st_drop_geometry</span>() <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">left_join</span>(<span class="cm-variable">dplyr</span><span class="cm-operator">::</span><span class="cm-variable">select</span>(<span class="cm-variable">Tracts.2009.inf</span>, <span class="cm-variable">GEOID</span>, <span class="cm-variable">MedRent.inf</span>, <span class="cm-variable">year</span>), </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">by</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-string">"GEOID"</span><span class="cm-operator">=</span><span class="cm-string">"GEOID"</span>, <span class="cm-string">"year"</span><span class="cm-operator">=</span><span class="cm-string">"year"</span>)) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">st_sf</span>() <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">mutate</span>(<span class="cm-variable">distance</span> <span class="cm-operator">=</span> <span class="cm-variable">distance</span> <span class="cm-operator">/</span> <span class="cm-number">1609.34</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">multi09.Summary</span> <span class="cm-operator cm-arrow">&lt;-</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">st_drop_geometry</span>(<span class="cm-variable">multirings_2009</span>) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">group_by</span>(<span class="cm-variable">year</span>, <span class="cm-variable">distance</span>) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">summarize</span>(<span class="cm-variable">Rent</span> <span class="cm-operator">=</span> <span class="cm-variable">mean</span>(<span class="cm-variable">MedRent.inf</span>, <span class="cm-variable">na.rm</span> <span class="cm-operator">=</span> <span class="cm-variable">T</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#multirings_2018</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">multirings_2018</span> <span class="cm-operator cm-arrow">&lt;-</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">st_join</span>(<span class="cm-variable">st_centroid</span>(<span class="cm-variable">dplyr</span><span class="cm-operator">::</span><span class="cm-variable">select</span>(<span class="cm-variable">tracts18</span>, <span class="cm-variable">GEOID</span>, <span class="cm-variable">year</span>)), </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">multipleRingBuffer</span>(<span class="cm-variable">st_union</span>(<span class="cm-variable">station_2009</span>), <span class="cm-number">16898.07</span>, <span class="cm-number">804.67</span>)) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">st_drop_geometry</span>() <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">left_join</span>(<span class="cm-variable">dplyr</span><span class="cm-operator">::</span><span class="cm-variable">select</span>(<span class="cm-variable">tracts18</span>, <span class="cm-variable">GEOID</span>, <span class="cm-variable">MedRent</span>, <span class="cm-variable">year</span>), </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">by</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-string">"GEOID"</span><span class="cm-operator">=</span><span class="cm-string">"GEOID"</span>, <span class="cm-string">"year"</span><span class="cm-operator">=</span><span class="cm-string">"year"</span>)) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">st_sf</span>() <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">mutate</span>(<span class="cm-variable">distance</span> <span class="cm-operator">=</span> <span class="cm-variable">distance</span> <span class="cm-operator">/</span> <span class="cm-number">1609.34</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">multi18.Summary</span> <span class="cm-operator cm-arrow">&lt;-</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">st_drop_geometry</span>(<span class="cm-variable">multirings_2018</span>) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">group_by</span>(<span class="cm-variable">year</span>, <span class="cm-variable">distance</span>) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">summarize</span>(<span class="cm-variable">Rent</span> <span class="cm-operator">=</span> <span class="cm-variable">mean</span>(<span class="cm-variable">MedRent</span>, <span class="cm-variable">na.rm</span> <span class="cm-operator">=</span> <span class="cm-variable">T</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#plot the geom_line</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ggplot</span>()<span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_line</span>(<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">multi09.Summary</span>,<span class="cm-variable">aes</span>(<span class="cm-variable">x</span> <span class="cm-operator">=</span> <span class="cm-variable">distance</span>,<span class="cm-variable">y</span> <span class="cm-operator">=</span> <span class="cm-variable">Rent</span>,<span class="cm-variable">colour</span> <span class="cm-operator">=</span> <span class="cm-string">"2009"</span>),<span class="cm-variable">size</span><span class="cm-operator">=</span><span class="cm-number">2</span>)<span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_point</span>(<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">multi09.Summary</span>,<span class="cm-variable">aes</span>(<span class="cm-variable">x</span> <span class="cm-operator">=</span> <span class="cm-variable">distance</span>,<span class="cm-variable">y</span> <span class="cm-operator">=</span> <span class="cm-variable">Rent</span>,<span class="cm-variable">colour</span> <span class="cm-operator">=</span> <span class="cm-string">"2009"</span>),<span class="cm-variable">size</span><span class="cm-operator">=</span><span class="cm-number">4</span>)<span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_line</span>(<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">multi18.Summary</span>,<span class="cm-variable">aes</span>(<span class="cm-variable">x</span> <span class="cm-operator">=</span> <span class="cm-variable">distance</span>,<span class="cm-variable">y</span> <span class="cm-operator">=</span> <span class="cm-variable">Rent</span>,<span class="cm-variable">colour</span> <span class="cm-operator">=</span> <span class="cm-string">"2018"</span>),<span class="cm-variable">size</span><span class="cm-operator">=</span><span class="cm-number">2</span>)<span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_point</span>(<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">multi18.Summary</span>,<span class="cm-variable">aes</span>(<span class="cm-variable">x</span> <span class="cm-operator">=</span> <span class="cm-variable">distance</span>,<span class="cm-variable">y</span> <span class="cm-operator">=</span> <span class="cm-variable">Rent</span>,<span class="cm-variable">colour</span> <span class="cm-operator">=</span> <span class="cm-string">"2018"</span>),<span class="cm-variable">size</span><span class="cm-operator">=</span><span class="cm-number">4</span>)<span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">scale_colour_manual</span>(<span class="cm-string">""</span>,<span class="cm-variable">values</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-string">"2009"</span> <span class="cm-operator">=</span> <span class="cm-string">"#7bccc4"</span>,<span class="cm-string">"2018"</span><span class="cm-operator">=</span><span class="cm-string">"#43a2ca"</span>))<span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">xlab</span>(<span class="cm-string">"Year"</span>)<span class="cm-operator">+</span><span class="cm-variable">ylab</span>(<span class="cm-string">"dolloars"</span>)<span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">plotTheme</span>() <span class="cm-operator">+</span> <span class="cm-variable">theme</span>(<span class="cm-variable">legend.position</span><span class="cm-operator">=</span><span class="cm-string">"bottom"</span>)<span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">labs</span>(<span class="cm-variable">caption</span> <span class="cm-operator">=</span> <span class="cm-string">"Data:US Cencus Bureau, City of Los Angeles Open Data"</span>) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">ggtitle</span>(<span class="cm-string">"Rent as a Function of Distance to Metro Stations"</span>,<span class="cm-variable">subtitle</span> <span class="cm-operator">=</span> <span class="cm-string">"Real Dollars"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 966px;"></div><div class="CodeMirror-gutters" style="display: none; height: 966px;"></div></div></div></pre><p><img src="https://github.com/ihcgnahz/MUSA-508-assignment1/blob/master/2.3.png?raw=true" referrerpolicy="no-referrer" alt="image-20200924132342725"></p><p>&nbsp;</p><p><span>Within 5 miles away from the metro station, the median rent of 2018 is greater than that of 2019 at a relatively steady difference. The difference decreased constantly beyond 5 miles.</span></p><p><span>There can be two possible explanations. First, citizens in Los Angeles are willing to pay more for neighborhoods near a TOD station, therefore the median rent increased significantly nearby a station. Second, since majority of metro station in Los Angeles  located in downtown, citizens could be attracted by convenience life in city rather than the metro station. Therefore, the rent in suburb area didn&#39;t change so much for the past decades.</span></p><h4><a name="5-crime-analytics-and-tod" class="md-header-anchor"></a><span>5. Crime Analytics and TOD</span></h4><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># ---- Read Crime Open Data -----</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">crime09</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">st_read</span>(<span class="cm-string">'F:</span><span class="cm-string-2">\\</span><span class="cm-string">MUSA</span><span class="cm-string-2">\\</span><span class="cm-string">MUSA-505</span><span class="cm-string-2">\\</span><span class="cm-string">assignment1</span><span class="cm-string-2">\\</span><span class="cm-string">crime_shp</span><span class="cm-string-2">\\</span><span class="cm-string">crime_2009.shp'</span>)<span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">select</span>(<span class="cm-variable">Date_Rptd</span>, <span class="cm-variable">Crm_Cd_Des</span>) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">st_transform</span>(<span class="cm-variable">st_crs</span>(<span class="cm-variable">tracts09</span>)) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">crime18</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">st_read</span>(<span class="cm-string">'F:</span><span class="cm-string-2">\\</span><span class="cm-string">MUSA</span><span class="cm-string-2">\\</span><span class="cm-string">MUSA-505</span><span class="cm-string-2">\\</span><span class="cm-string">assignment1</span><span class="cm-string-2">\\</span><span class="cm-string">crime_shp</span><span class="cm-string-2">\\</span><span class="cm-string">crime_2018.shp'</span>)<span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">select</span>(<span class="cm-variable">Date_Rptd</span>, <span class="cm-variable">Crm_Cd_Des</span>) <span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">st_transform</span>(<span class="cm-variable">st_crs</span>(<span class="cm-variable">tracts09</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">crime18_b</span> <span class="cm-operator cm-arrow">&lt;-</span><span class="cm-variable">crime18</span>[(<span class="cm-variable">crime18</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Crm_Cd_Des</span> <span class="cm-operator">==</span><span class="cm-string">"RAPE, FORCIBLE"</span>),]<span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">mutate</span>(<span class="cm-variable">year</span><span class="cm-operator">=</span><span class="cm-string">'2018'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">crime09_b</span> <span class="cm-operator cm-arrow">&lt;-</span><span class="cm-variable">crime09</span>[(<span class="cm-variable">crime09</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Crm_Cd_Des</span> <span class="cm-operator">==</span><span class="cm-string">"RAPE, FORCIBLE"</span>),]<span class="cm-operator cm-variable-2">%&gt;%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">mutate</span>(<span class="cm-variable">year</span><span class="cm-operator">=</span><span class="cm-string">'2009'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">crime.group</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">rbind</span>(<span class="cm-variable">crime18_b</span>,<span class="cm-variable">crime09_b</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># ---- Read Crime Open Data -----</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ggplot</span>()<span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_sf</span>(<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">allTracts</span>, <span class="cm-variable">fill</span><span class="cm-operator">=</span><span class="cm-string">"black"</span>)<span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_sf</span>(<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">crime.group</span>, &nbsp;<span class="cm-variable">color</span> <span class="cm-operator">=</span> <span class="cm-string">"red"</span>,<span class="cm-variable">alpha</span><span class="cm-operator">=</span><span class="cm-number">0.5</span>)<span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_sf</span>(<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">buffer.group</span>, <span class="cm-variable">fill</span> <span class="cm-operator">=</span> <span class="cm-string">"transparent"</span>, <span class="cm-variable">color</span> <span class="cm-operator">=</span> <span class="cm-string">"white"</span>)<span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">scale_fill_manual</span>(<span class="cm-variable">values</span> <span class="cm-operator">=</span> <span class="cm-variable">palette5</span>,<span class="cm-variable">labels</span> <span class="cm-operator">=</span> <span class="cm-variable">qBr</span>(<span class="cm-variable">Tracts.2018</span>, <span class="cm-string">"MedRent"</span>),<span class="cm-variable">name</span> <span class="cm-operator">=</span> <span class="cm-string">"Rent</span><span class="cm-string-2">\n</span><span class="cm-string">(Quintile Breaks)"</span>) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">labs</span>(<span class="cm-variable">title</span> <span class="cm-operator">=</span> <span class="cm-string">"Crime and Metro Station Distribution 2009-2018"</span>, <span class="cm-variable">subtitle</span> <span class="cm-operator">=</span> <span class="cm-string">"Forcible Rape"</span>) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">facet_wrap</span>(<span class="cm-operator">~</span><span class="cm-variable">year</span>)<span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">mapTheme</span>() <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">labs</span>(<span class="cm-variable">caption</span> <span class="cm-operator">=</span> <span class="cm-string">"Data:US Census Bureau, City of Los Angeles Open Data"</span>) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">theme</span>(<span class="cm-variable">plot.title</span> <span class="cm-operator">=</span> <span class="cm-variable">element_text</span>(<span class="cm-variable">size</span><span class="cm-operator">=</span><span class="cm-number">22</span>))</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 713px;"></div><div class="CodeMirror-gutters" style="display: none; height: 713px;"></div></div></div></pre><p><img src="https://github.com/ihcgnahz/MUSA-508-assignment1/blob/master/3.1.png?raw=true" referrerpolicy="no-referrer" alt="image-20200924133450670"></p><p>&nbsp;</p><p><span>The crime dataset from City of Los Angeles Open Data indicates that total of crime in 2018 is far less than that in 2019. Unfortunately, we didn&#39;t find a reason for this situation. </span></p><p><span>Based on the data we wrangled, forcible rape clustered in downtown, where is also the joint of metro lines. For the same part of area, it is clear that the number of crimes drops after the Expo Line was built. </span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="R"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ggplot</span>(<span class="cm-variable">allTracts.group</span>)<span class="cm-operator">+</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_sf</span>(<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">st_union</span>(<span class="cm-variable">tracts09</span>))<span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_sf</span>(<span class="cm-variable">aes</span>(<span class="cm-variable">fill</span> <span class="cm-operator">=</span> <span class="cm-variable">q5</span>(<span class="cm-variable">MedRent</span>))) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_sf</span>(<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">crime.group</span>, &nbsp;<span class="cm-variable">color</span> <span class="cm-operator">=</span> <span class="cm-string">"red"</span>,<span class="cm-variable">alpha</span><span class="cm-operator">=</span><span class="cm-number">0.7</span>)<span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">scale_fill_manual</span>(<span class="cm-variable">values</span> <span class="cm-operator">=</span> <span class="cm-variable">palette5</span>,<span class="cm-variable">labels</span> <span class="cm-operator">=</span> <span class="cm-variable">qBr</span>(<span class="cm-variable">allTracts.group</span>, <span class="cm-string">"MedRent"</span>),<span class="cm-variable">name</span> <span class="cm-operator">=</span> <span class="cm-string">"Rent</span><span class="cm-string-2">\n</span><span class="cm-string">(Quintile Breaks)"</span>) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">labs</span>(<span class="cm-variable">title</span> <span class="cm-operator">=</span> <span class="cm-string">"Crime and Medium Rent Distribution 2009-2018"</span>, <span class="cm-variable">subtitle</span> <span class="cm-operator">=</span> <span class="cm-string">"Forcible Rape"</span>) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">facet_wrap</span>(<span class="cm-operator">~</span><span class="cm-variable">year</span>)<span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">labs</span>(<span class="cm-variable">caption</span> <span class="cm-operator">=</span> <span class="cm-string">"Data:US Census Bureau, City of Los Angeles Open Data"</span>) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">mapTheme</span>() <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">theme</span>(<span class="cm-variable">plot.title</span> <span class="cm-operator">=</span> <span class="cm-variable">element_text</span>(<span class="cm-variable">size</span><span class="cm-operator">=</span><span class="cm-number">22</span>))</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 253px;"></div><div class="CodeMirror-gutters" style="display: none; height: 253px;"></div></div></div></pre><p><img src="https://github.com/ihcgnahz/MUSA-508-assignment1/blob/master/3.2.png?raw=true" referrerpolicy="no-referrer" alt="image-20200924133340713"></p><p>&nbsp;</p><p><span>For both of the year 2008 and year 2018, forcible rape were majority clustered in urban area, where the medium rent is relatively lower.</span></p><h4><a name="6-discussion" class="md-header-anchor"></a><span>6. Discussion</span></h4><p><span>Based on the analyzing outcomes, TOD areas seem to be more attractive to citizens with a bachelor degree and had a greater growth rates of rent than non-TOD area. But we are not able to make a conclusion for the insufficient support. One reason is the overlap of downtown LA and the buffer of metro station. For example, people with a bachelor degree may move to downtown for  shorter distance from home to office or to the college town, not for the TOD. Now the graphic give us a hint, if we want draw a conclusion, we should know the reason behind their choice. Some further research on the difference of individual preferences can be conducted.</span></p><p><span>The population on the graphic changed little doesn&#39;t mean that TOD do not have attraction to people. For a well-developed city like LA, the amount population is largely decided by the building density, because it is challenging to remove someone&#39;s house to build a denser apartment in order to increase the population. In such a situation, I think research on migration of population among different tracts will be more informative than comparing the amount of population in a certain tract. Because, if citizens are willing to pay more for the rent, the rent will goes up, Some people may leave the city for the unbearable rent and migration/gentrification happens.</span></p><p><span>As for the crime data, it is clear that crime is related with median rent. The reason can be variety, such as area with higher rent may have better safe security and lower population density. Also, for the overlap area of downtown LA and the buffer of metro station, it is hard to conclude that forcible rape is more likely to happen near the TOD. But safety related with public transportation can be considered during planning process.</span></p><p><span> </span></p></div>
</body>
</html>